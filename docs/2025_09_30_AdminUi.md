# AdminUi

- [ ] User Workaround ausbauen (aktuell lokal noch placeholder user; neue User anlegen geht nicht über UI)
- [ ] Model -> was brauchen wir überhaupt?
    - [ ] Player
    - [ ] Course (Sammlung von Playern und Teacher)
    - [ ] Zuordnung Player <-> Game (Sind die "Accounts" der Schülerinnen auch die Player im Game?)
    - [ ] Teacher (= user?)
    - [ ] Scientist (die Leute von der Uni, die die Daten auswerten wollen) (= user?)
- [ ] Ansicht für Lehrperson
    - [ ] Übersicht: Klassen (alle Klassen dieser Lehrperson)
    - [ ] Ansicht: Klasse
        - [ ] Schülerinnen (pseudonymisier?) + "Passwörter"
        - [ ] aktive Spiele
        - [ ] Spiele erstellen
        - [~] ~~Spiele pausieren?~~
- [ ] Ansicht für "Admins"
    - [ ] Übersicht: Klassen
    - [ ] Ansich: Klasse
        - [ ] was sollen "admins" sehen?
    - [ ] Logs herunterladen?


## Workflows

### Admin möchte neuen Kurs anlegen

1. ggf. Lehrperson anlegen: `admin/users/create`
2. `admin/courses/create`
    - Kursname (mit Schule?)
    - Lehrperson auswählen
3. Liste mit IDs aus SoSciSurvey zum Kurs hinzufügen -> CSV import (TODO)

### Lehrperson möchte alle eigenen Kurse sehen

1. `admin/courses` zeigt nur Kurse an, die der Lehrperson zugeordnet sind

### Lehrperson möchte Spielenden Namen zuordnen (Brauchen wir das? -> erstmal weglassen, notfalls auf Zettelliste pflegen?)

1. wählt den entsprechenden Kurs aus `admin/courses` -> Aktion "anzeigen"
2. in Kursansicht werden alle SoSciSurvey_Ids angezeigt
    - dahinter ein Textfeld für Namen?
3. Speichern pro Eintrag oder insgesamt?

### Lehrperson möchte Spiele starten

1. wählt den entsprechenden Kurs aus `admin/courses` -> Aktion "anzeigen"
2. ggf. Haken in Spielendenliste entfernen (wenn nicht anwesend)
3. Button "Spiele erstellen" klicken
4. Spielende melden sich unter `/login` mit SoSciSurvey-Id + Passwort an
5. Spielende gehen auf Übersicht aller ihrer Spiele und wählen das eben erstellte Spiel aus
6. Spiel startet wie angedacht (Name, Lebensziel; Wenn alle bereit -> start)


## Log

- fix tailwind
    - erst versucht, die Variante von Michi aus dem Kickstarter zu benutzen -> viele Probleme -> Kickstarter hat andere Versionen -> abgebrochen, weil zu viel Zeit gefressen
    - remove `->viteTheme('resources/css/filament/admin/theme.css')` from `AdminPanelProvider`
       -> `/admin` renders fine now
- Create filament resources:
    ```bash
    # Create Models and empty migrations:
    dev artisan make:model Course --migration
    dev artisan make:model Player --migration
    dev artisan make:model Game --migration

    # Create relation table for game and player
    dev artisan make:migration create_game_player_table --create=game_player

    # run migrations
    dev artisan migrate

    # create a filament "Page" for Course
    dev artisan make:filament-resource Course
    ```
- Migrations angepasst -> Naming ist wichtig, weil Filament anscheinend recht viel magic macht um die Tabellen/Ids zu matchen
    - z.B. Tabelle `course` hat property `teacher_id` (foreign key zu Tabelle `teacher`),
      im Model heißt die Funktion dazu `teacher()` und in `CourseResources` wird es je nach Fall mit `teacher` oder `teacher_id`
      referenziert
- Nutzer über adminUI anlgegen klappt noch nicht (kein default-PW und null sein darf es nicht -> Fehlermeldung)
- Resource für Player angelegt `dev artisan make:filament-resource Player`
- View für Kurs? -> vermutlich eher Custom Page, weil die eine Liste der Lernenden/Spiele und Actions anzeigen soll
  `dev artisan make:filament-page ShowCourse --resource=CourseResource --type=custom`
- Custom Action `Show` in `CourseResource` -> geht zu `/courses/{id}/show`

